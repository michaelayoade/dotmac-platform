{% extends "platform_base.html" %}
{% from "components/buttons.html" import btn_submit %}

{% block content %}
{% if saved %}
<div class="mb-6 flex items-center gap-2.5 rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-[13px] text-emerald-700 dark:border-emerald-800/40 dark:bg-emerald-950/30 dark:text-emerald-400">
    <svg class="h-4 w-4 shrink-0" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
    Settings saved successfully.
</div>
{% endif %}

<form method="POST" action="/settings" class="max-w-2xl space-y-8" data-testid="settings-form"
      x-data="{ submitting: false }" @submit="submitting = true">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />

    <!-- Server Paths -->
    <div class="rounded-xl border border-surface-200/80 bg-white p-7 dark:border-surface-800/50 dark:bg-surface-900/80">
        <h2 class="text-xl font-display text-surface-900 dark:text-white">Server Paths</h2>
        <p class="mt-1 mb-6 text-[13px] text-surface-400 dark:text-surface-500">Default filesystem paths used on target servers during deployment.</p>

        <div class="space-y-5">
            <div>
                <label for="default_deploy_path" class="block text-[11px] font-semibold uppercase tracking-[0.15em] text-surface-400 dark:text-surface-500">Instances Path</label>
                <input type="text" id="default_deploy_path" name="default_deploy_path"
                       value="{{ platform_settings.default_deploy_path }}"
                       data-testid="settings-deploy-path"
                       class="mt-1.5 w-full rounded-lg border border-surface-200 bg-surface-50 px-4 py-2.5 text-[13px] font-mono text-surface-900 placeholder-surface-400 focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-200/50 dark:border-surface-700 dark:bg-surface-800 dark:text-white dark:placeholder-surface-500 dark:focus:ring-primary-500/20 transition"
                       placeholder="/opt/dotmac/instances" />
                <p class="mt-1.5 text-[11px] text-surface-400 dark:text-surface-500">Base directory for instance configs. Each instance gets a subdirectory.</p>
            </div>
        </div>
    </div>

    <!-- Save -->
    <div class="flex justify-end">
        {{ btn_submit("Save Settings", submitting_text="Saving...", size="lg", testid="settings-submit") }}
    </div>
</form>
{% endblock %}
